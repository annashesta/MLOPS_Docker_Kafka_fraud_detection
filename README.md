

# MLOps –ü—Ä–æ–µ–∫—Ç: –°–µ—Ä–≤–∏—Å –°–∫–æ—Ä–∏–Ω–≥–∞ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞ Apache Kafka

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ ML-–º–æ–¥–µ–ª–∏ –¥–ª—è —Å–∫–æ—Ä–∏–Ω–≥–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ –∏–∑ **Apache Kafka**, –∞ –Ω–µ –∏–∑ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ —Ñ–∞–π–ª–∞. –†–µ—à–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker –∏ Docker Compose.

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–∫–∞—á–∞—Ç—å –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –∏ –ø–æ–º–µ—Å—Ç–∏—Ç—å –µ–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `fraud_detector/model/catboost_model.cbm` , –Ω–∞ –¥–∏—Å–∫–µ —Ç–∞–∫ –∂–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è  —Ñ–∞–π–ª—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∞:
https://drive.google.com/drive/folders/1D1dpfcPAHQvUd8FOuyAc4DyJ27TZMNlk?usp=sharing


## –û–±–∑–æ—Ä –ü—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é Docker Compose:

  * **Zookeeper**: –°–µ—Ä–≤–µ—Ä –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è Kafka.
  * **Kafka**: –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π Apache Kafka, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏–µ–º–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ—Ç–æ–∫–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–∫–æ—Ä–∏–Ω–≥–∞.
  * **kafka-setup**: –í—Ä–µ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Kafka, —Å–æ–∑–¥–∞–≤–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ–ø–∏–∫–∏ (`transactions` –∏ `scores`).
  * **fraud\_detector**: –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å —Å–∫–æ—Ä–∏–Ω–≥–∞. –ß–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ç–æ–ø–∏–∫–∞ `transactions`, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥, –ø—Ä–∏–º–µ–Ω—è–µ—Ç ML-–º–æ–¥–µ–ª—å –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –Ω–∞ CPU –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å–∫–æ—Ä –∏ —Ñ–ª–∞–≥ —Ñ—Ä–æ–¥–∞) –≤ —Ç–æ–ø–∏–∫ `scores`.
  * **database\_writer**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å. –ß–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ç–æ–ø–∏–∫–∞ `scores` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
  * **postgres**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–∫–æ—Ä–∏–Ω–≥–∞.
  * **interface**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Streamlit –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ PostgreSQL.
  * **kafka-ui**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kafka, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–ø–∏–∫–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –°–∏—Å—Ç–µ–º–µ

  * **Docker Desktop** (–≤–∫–ª—é—á–∞—è Docker Engine –∏ Docker Compose)
      * –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
MLOPS_fraud_detector
‚îú‚îÄ‚îÄ fraud_detector/                  # –ö–∞—Ç–∞–ª–æ–≥ —Å–µ—Ä–≤–∏—Å–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ app.py                       # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                   # Dockerfile –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îú‚îÄ‚îÄ model/                       # –ö–∞—Ç–∞–ª–æ–≥ —Å ML-–º–æ–¥–µ–ª—å—é –∏ –µ—ë –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ catboost_model.cbm
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ threshold.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ categorical_features.json
‚îÇ   ‚îî‚îÄ‚îÄ src/                         # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ª–æ–≥–∏–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ data_processing.py
‚îÇ       ‚îî‚îÄ‚îÄ model_inference.py
‚îú‚îÄ‚îÄ database_writer/                 # –ö–∞—Ç–∞–ª–æ–≥ —Å–µ—Ä–≤–∏—Å–∞ –∑–∞–ø–∏—Å–∏ –≤ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ app.py
‚îÇ   ‚îú‚îÄ‚îÄ init.sql                     # –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ interface/                       # –ö–∞—Ç–∞–ª–æ–≥ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ app.py
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ .streamlit/
‚îÇ       ‚îî‚îÄ‚îÄ config.toml
‚îú‚îÄ‚îÄ .gitignore                       # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ docker-compose.yaml              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Docker Compose
‚îî‚îÄ‚îÄ README.md                        # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```



## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ü—Ä–æ–µ–∫—Ç–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä:

```bash
git clone https://github.com/annashesta/MLOPS_Docker_Kafka_fraud_detection.git
cd MLOPS_Docker_Kafka_fraud_detectio
```

–°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
[Google Drive](https://drive.google.com/drive/folders/1D1dpfcPAHQvUd8FOuyAc4DyJ27TZMNlk?usp=sharing)

–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–πk –º–æ–¥–µ–ª–∏ –≤ –ø–∞–ø–∫—É:

fraud_detector/model/ ‚Üí catboost_model.cbm


### –ó–∞–ø—É—Å–∫ Docker Compose

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `docker-compose.yaml`) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
docker-compose up --build -d
```

  * `--build`: –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤—ã –≤–Ω–æ—Å–∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–æ–≤.
  * `-d`: –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (detached mode).

–î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã –∏ —Å—Ç–∞–Ω—É—Ç `Healthy` –∏–ª–∏ `Started`. 

–í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ `zookeeper`, `kafka`, `postgres` –∏–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å `healthy`, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (`fraud_detector`, `database_writer`, `interface`, `kafka-ui`) - `running` –∏–ª–∏ `started`. –°–µ—Ä–≤–∏—Å `kafka-setup` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `Exited` (–æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è).


### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
| –°–µ—Ä–≤–∏—Å | URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----|------------|
| Streamlit UI | http://localhost:8501 | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π |
| Kafka UI | http://localhost:8080 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π |
| PostgreSQL | `psql -U user -d transactions_db` | –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |



## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TD
    A[Streamlit UI] -->|JSON| B[Kafka: transactions]
    B --> C[Fraud Detector]
    C -->|Scores| D[Kafka: scores]
    D --> E[Database Writer]
    E --> F[PostgreSQL]
    C --> G[Model: CatBoost]
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. **Data Producer** (Streamlit):
   - Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ CSV
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è transaction_id
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Kafka (1 —Å–æ–æ–±—â–µ–Ω–∏–µ = 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è)

2. **Fraud Detector**:
   - –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ (–≥–µ–æ-—Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏)
   - –ú–æ–¥–µ–ª—å CatBoost (CPU inference)
   - –ü–æ—Ä–æ–≥–æ–≤–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

3. **Data Sink**:
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ Streamlit


-----

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (–ó–∞—á–µ—Ç –Ω–∞ 4)

### –î–æ—Å—Ç—É–ø –∫ Kafka UI

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8080`

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Kafka UI. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª–∞—Å—Ç–µ—Ä `local` –¥–æ—Å—Ç—É–ø–µ–Ω.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ø–∏–∫–æ–≤ Kafka

1.  –í Kafka UI –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Topics**.
2.  –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–≤–∞ —Ç–æ–ø–∏–∫–∞: `transactions` –∏ `scores`.
      * –ï—Å–ª–∏ —Ç–æ–ø–∏–∫–æ–≤ –Ω–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ, `kafka-setup` –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ Kafka –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤.
        –ü–æ–ø—Ä–æ–±—É–π—Ç–µ **–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Kafka UI** (–∏–Ω–æ–≥–¥–∞ –µ–º—É –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ):
        ```bash
        docker-compose restart kafka-ui
        ```
        –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥ - 1 –º–∏–Ω—É—Ç—É –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É Kafka UI.
      * –ï—Å–ª–∏ —Ç–æ–ø–∏–∫–∏ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ —Å–æ–∑–¥–∞–Ω—ã –Ω–∞ —Å–∞–º–æ–º –±—Ä–æ–∫–µ—Ä–µ Kafka:
        ```bash
        docker-compose exec kafka kafka-topics.sh --bootstrap-server localhost:9092 --list
        ```
        –í –≤—ã–≤–æ–¥–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `transactions` –∏ `scores`. –ï—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º –µ—Å—Ç—å, –Ω–æ –Ω–µ –≤ UI, —Ç–æ —ç—Ç–æ —Ç–æ—á–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å UI (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–º–æ—á—å). 

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ Kafka

1.  –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Streamlit: `http://localhost:8501`
2.  –í —ç—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
3.  –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª test.csv  –Ω–∞–∂–∞–≤ `Browse files`
4.  –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É"** 
      * –ö–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–∑ `test.csv` –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–æ–ø–∏–∫ `transactions`.
	-  –î–ª—è —Ç–µ—Å—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –º–∞–ª–µ–Ω—å–∫–∏–π (23 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏) –∏ –±–æ–ª—å—à–æ–π(262144 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏) —Ñ–∞–π–ª—ã, –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è —Å—Å–æ–±—â–µ–Ω–∏–µ `–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!`
5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –°–∫–æ—Ä–∏–Ω–≥–∞` –∏ –Ω–∞–∂–∞–≤ `–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã`.
   –¢–∞–∫ –∂–µ –æ—Ç–ø—Ä–∞–≤–∫–µ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –ø—Ä–µ—Ä–≤–∞—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç, –ø–µ—Ä–µ–π–¥—è –≤–æ –≤–∫–ª–∞–¥–∫—É `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –°–∫–æ—Ä–∏–Ω–≥–∞` –∏ –Ω–∞–∂–∞–≤ `–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã`.


### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–æ–ø–∏–∫–µ `scores`

1.  –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ Kafka UI (`http://localhost:8080`).
2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Topics**, –∑–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–ø–∏–∫ `scores`.
3.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Messages**.
4.  –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã —Å–µ—Ä–≤–∏—Å–æ–º `fraud_detector`. –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å `transaction_id`, `score` –∏ `fraud_flag`.
      * –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ `fraud_detector`:
        ```bash
        docker-compose logs fraud_detector
        ```
        –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —á—Ç–µ–Ω–∏–µ–º –∏–∑ `transactions` –∏–ª–∏ –∑–∞–ø–∏—Å—å—é –≤ `scores`, –∞ —Ç–∞–∫–∂–µ –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –º–æ–¥–µ–ª—å—é.

-----

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (–ó–∞—á–µ—Ç –Ω–∞ 5)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ö–µ–º—ã –∏ –¥–∞–Ω–Ω—ã—Ö.

1.  –ü–æ–ª—É—á–∏—Ç–µ –∏–º—è –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL:
    ```bash
    docker ps | grep postgres
    ```
    –í—ã–≤–æ–¥ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫: `mlops_3-postgres-1`
2.  –ó–∞–π–¥–∏—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL:
    ```bash
    docker-compose exec postgres psql -U user -d transactions_db
    ```
    (–ó–∞–º–µ–Ω–∏—Ç–µ `user` –∏ `transactions_db` –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `docker-compose.yaml`, –µ—Å–ª–∏ –æ–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è).
3.  –í–Ω—É—Ç—Ä–∏ `psql` –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü—ã `scores`:
    ```sql
    \dt
    ```
    –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É `scores`.
4.  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∞–±–ª–∏—Ü—ã `scores`:
    ```sql
    SELECT * FROM scores LIMIT 5;
    ```
    –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∑–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –≤–∫–ª—é—á–∞—è `transaction_id`, `score` –∏ `fraud_flag`.
5.  –í—ã–π–¥–∏—Ç–µ –∏–∑ `psql`:
    ```sql
    \q
    ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ `database_writer`

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `database_writer` —É—Å–ø–µ—à–Ω–æ —á–∏—Ç–∞–µ—Ç –∏–∑ Kafka –∏ –ø–∏—à–µ—Ç –≤ PostgreSQL.

```bash
docker-compose logs database_writer
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Ç–∏–ø–∞ `Successfully inserted transaction ... into PostgreSQL`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ UI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1.  –û—Ç–∫—Ä–æ–π—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Streamlit: `http://localhost:8501`.
2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∫–ª–∞–¥–∫–∞ **"–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–æ—Ä–∏–Ω–≥–∞"** –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏).
3.  –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã"**.
4.  –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
      * 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ PostgreSQL —Å `fraud_flag == 1`.
      * –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∫–æ—Ä–æ–≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

-----

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü—Ä–æ–µ–∫—Ç–∞

–ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏ –∏ —Ç–æ–º–∞ (–∫—Ä–æ–º–µ —Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–µ):

```bash
docker-compose down
```

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–∞–∫–∂–µ —Ç–æ–º–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è PostgreSQL –∏–ª–∏ Kafka), —á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ:

```bash
docker-compose down -v
```

  * –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `-v` —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ PostgreSQL –∏ Kafka\!



-----

## –†–µ—à–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º

  * **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–ª–∏ `Exited` —Å –æ—à–∏–±–∫–æ–π:**
    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

    ```bash
    docker-compose logs <–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞>
    ```

    (–Ω–∞–ø—Ä–∏–º–µ—Ä, `docker-compose logs fraud_detector`)
    –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏–ª–∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ —Å—Ç–µ–∫–∞.

  * **Kafka UI –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø–∏–∫–∏/—Å–æ–æ–±—â–µ–Ω–∏—è:**

      * –ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å –≤—ã—à–µ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å `kafka-ui`: `docker-compose restart kafka-ui`.
      * –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–ø–∏–∫–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω—ã –Ω–∞ –±—Ä–æ–∫–µ—Ä–µ Kafka, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ 

  * **–°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Kafka (–Ω–µ—Ç –≤ —Ç–æ–ø–∏–∫–µ `scores` –∏–ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö):**

      * –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `fraud_detector` –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏/–∑–∞–ø–∏—Å–∏ –∏–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏.
      * –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `database_writer` –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∏–∑ `scores` –∏–ª–∏ –∑–∞–ø–∏—Å–∏ –≤ PostgreSQL.
      * –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Kafka —Å–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç (`docker-compose ps` -\> `kafka` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `healthy`).

  * **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL:**

      * –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `postgres`: `docker-compose logs postgres`.
      * –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å `postgres` `healthy` –≤ `docker-compose ps`.
      * –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫—Ä–∏–ø—Ç `init.sql` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.







# Real-Time Fraud Detection System

## DISCLAIMER
–°–µ—Ä–≤–∏—Å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –≤ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª—è—Ö –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–Ω—è—Ç–∏–π –ú–¢–° –®–ê–î 2025 –ø–æ MLOps. –î–∞—Ç–∞—Å–µ—Ç—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è [Teta ML-1 2025](https://www.kaggle.com/competitions/teta-ml-1-2025). –°–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –º–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ML-–º–æ–¥–µ–ª–∏ –∏ Kafka –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
1. **`interface`** (Streamlit UI):
   - –°–æ–∑–¥–∞–Ω –¥–ª—è —É–¥–æ–±–Ω–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.
   - –ò–º–∏—Ç–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ Kafka —á–µ—Ä–µ–∑ CSV-—Ñ–∞–π–ª—ã.
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞ JSON –≤ —Ç–æ–ø–∏–∫ Kafka `transactions`.
2. **`fraud_detector`** (ML Service):
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å CatBoost (`catboost_model.cbm`).
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö:
     - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.
     - –†–∞—Å—á–µ—Ç –≥–µ–æ-—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π.
     - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç —Å–∫–æ—Ä–∏–Ω–≥ —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –ø–æ—Ä–æ–≥–æ–º.
   - –í—ã–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ—Ä–∏–Ω–≥–∞ –≤ —Ç–æ–ø–∏–∫ Kafka `scoring`.
3. **`database_writer`** (Database Writer):
   - –ß–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ç–æ–ø–∏–∫–∞ Kafka `scoring`.
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–æ—Ä–∏–Ω–≥–∞ –≤ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
4. **Kafka Infrastructure**:
   - **Zookeeper + Kafka –±—Ä–æ–∫–µ—Ä**:
     - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤ `transactions` –∏ `scoring`.
   - **Kafka UI**:
     - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ—Ä—Ç 8080).
5. **PostgreSQL Database**:
   - –•—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–æ—Ä–∏–Ω–≥–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏.



## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker 20.10+
- Docker Compose 2.0+

### –ó–∞–ø—É—Å–∫
```bash
git clone https://github.com/your-repo/fraud-detection-system.git
cd fraud-detection-system
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build
```
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- **Streamlit UI**: [http://localhost:8501](http://localhost:8501)
- **Kafka UI**: [http://localhost:8080](http://localhost:8080)
- **–õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤**:
  ```bash
  docker-compose logs <service_name>  # –ù–∞–ø—Ä–∏–º–µ—Ä: fraud_detector, kafka, interface
  ```




## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:
 - –ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Streamlit. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª —Ñ–æ—Ä–º–∞—Ç–∞ `test.csv` –∏–∑ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è [Teta ML-1 2025](https://www.kaggle.com/competitions/teta-ml-1-2025).
 - –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:
    ```csv
    transaction_time,amount,lat,lon,merchant_lat,merchant_lon,gender,...
    2023-01-01 12:30:00,150.50,40.7128,-74.0060,40.7580,-73.9855,M,...
    ```
 - –î–ª—è –ø–µ—Ä–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π —Å–µ–º–ø–ª –¥–∞–Ω–Ω—ã—Ö (–¥–æ 100 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π) –∑–∞ —Ä–∞–∑, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–µ –∑–∞–Ω—è–ª–æ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
 - **Kafka UI**: –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫–∞—Ö `transactions` –∏ `scoring`.
 - **–õ–æ–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏**: `/app/logs/service.log` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `fraud_detector`.

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
 - –°–∫–æ—Ä–∏–Ω–≥–æ–≤—ã–µ –æ—Ü–µ–Ω–∫–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ç–æ–ø–∏–∫ `scoring` –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
    ```json
    {
      "score": 0.995, 
      "fraud_flag": 1, 
      "transaction_id": "d6b0f7a0-8e1a-4a3c-9b2d-5c8f9d1e2f3a"
    }
    ```




## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Kafka
```yaml
–¢–æ–ø–∏–∫–∏:
- transactions (–≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- scoring (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–æ—Ä–∏–Ω–≥–∞)
–†–µ–ø–ª–∏–∫–∞—Ü–∏—è: 1 (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
–ü–∞—Ä—Ç–∏—Ü–∏–∏: 3
```
*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* 
–î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. –ú–æ–¥–µ–ª—å `catboost_model.cbm` —Ä–∞–∑–º–µ—â–µ–Ω–∞ –≤ `fraud_detector/model/`
3. –ü–æ—Ä—Ç—ã 8080, 8501 –∏ 9092 —Å–≤–æ–±–æ–¥–Ω—ã –Ω–∞ —Ö–æ—Å—Ç–µ

